{% extends 'OrgabatGameBundle::base_listejeux.html.twig' %}
{% block body %}
    <div class="col-sm-9">
        <h1>{{ category.name }}</h1>
    </div>
    <div class="col-sm-3">
        <div class="panel panel-default">
            <div class="panel-body">
                <p>Résumé :</p>
                <div class="progress">
                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                    </div>
                </div>
                <div class="progress">
                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                    </div>
                </div>
                <div class="progress">
                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% for exercise in exercises %}
        {% set totalDoneNote = null %}
        {% set totalExerciseNote = exercise.healthMaxNote + exercise.organizationMaxNote + exercise.businessNotorietyMaxNote %}

        {% if dones[exercise.id]is defined %}
            {% set totalDoneNote = dones[exercise.id].healthNote + dones[exercise.id].organizationNote + dones[exercise.id].businessNotorietyNote %}
        {% endif %}
        <div class="col-sm-4 panel panel-primary game {{ totalDoneNote >= 6.5 ? 'disabled' : '' }}" data-game-id="{{ exercise.id }}">
            <div class="panel-heading">
                <h2 id="game_label">{{ exercise.name }}</h2>
            </div>
            <div class="content">
                <div class="panel-body">
                    <h4>
                        {% if totalDoneNote >= 6.5 %}
                            Jeu terminé
                        {% elseif totalDoneNote < 6.5 and totalDoneNote != null %}
                            Meilleur score: {{ totalDoneNote }} / {{ totalExerciseNote }}
                        {% else %}
                            Essaie-le !
                        {% endif %}
                    </h4>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                </div>
                <div>
                    {% if dones[exercise.id]is defined %}
                        <div>
                            {{ dones[exercise.id].healthNote }}
                            /
                            {{ exercise.healthMaxNote }}
                        </div>
                        <div>
                            {{ dones[exercise.id].organizationNote }}
                            /
                            {{ exercise.organizationMaxNote }}
                        </div>
                        <div>
                            {{ dones[exercise.id].businessNotorietyNote }}
                            /
                            {{ exercise.businessNotorietyMaxNote }}
                        </div>
                    {% else %}
                        <div>{{ exercise.healthMaxNote }}</div>
                        <div>{{ exercise.organizationMaxNote }}</div>
                        <div>{{ exercise.businessNotorietyMaxNote }}</div>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}

    <a href="{{ path('default_category') }}" class="col-sm-12 btn btn-success" role="button" id="return">Retourner aux modules</a>

{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/exercices.js') }}"></script>
{% endblock %}
